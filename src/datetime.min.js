/*
 *  Copyright (c) 2012, Geoffrey McGill, Inc. (http://www.datetimejs.com/). All rights reserved.
 *  
 *  Permission is hereby granted, free of charge, to any person obtaining a copy
 *  of this software and associated documentation files (the "Software"), to deal
 *  in the Software without restriction, including without limitation the rights
 *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *  copies of the Software, and to permit persons to whom the Software is
 *  furnished to do so, subject to the following conditions:
 *  
 *  The above copyright notice and this permission notice shall be included in
 *  all copies or substantial portions of the Software.
 *  
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 *  THE SOFTWARE.
 *  
 *  See also:
 *      http://www.datetimejs.com/
 *      https://github.com/geoffreymcgill/DateTimeJS
 */

 var DateTime;(function(){DateTime=function(a){this.date=new Date;var b=null;if(a){var c=typeof a;if(c==="string"){b=DateTime.parse(a).date}else if(c==="number"){b=new Date(a)}else if(c==="object"){b=(new DateTime).set(a)}else if(a instanceof Date){b=a}else if(a instanceof DateTime){b=a.date}}if(b!==null){this.date=b}delete b};var $=DateTime,isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"};$.version="2.0.0";$.fn=DateTime.prototype;$.create=function(a){return new $(a)};$.today=function(){return(new $).clearTime()};$.now=function(){return new $};$.next=function(){return $.today().next()};$.last=$.prev=$.previous=function(){return $.today().last()};$.compare=function(a,b){if(a instanceof $){a=a.date}if(b instanceof $){b=b.date}return a<b?-1:a>b?1:0};$.equals=function(a,b){return $.compare(a,b)===0};$.min=function(a){return isArray(a)?a.sort($.compare)[0]:null};$.max=function(a){return isArray(a)?a.sort($.compare)[a.length-1]:null};$.inRange=function(a,b,c){return $.compare(a,b)>-1&&$.compare(a,c)<1};$.overlapping=function(a,b,c,d){if(arguments.length===2&&isArray(a)&&isArray(b)){return $.overlapping($.min(a),$.max(a),$.min(b),$.max(b))}return $.inRange(c,a,b)||$.inRange(b,c,d)};$.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0};$.daysInMonth=function(a,b){if(arguments.length<2){if(arguments.length===1){if(typeof a==="number"){a=(new $).year(a)}return $.daysInMonth(a.getFullYear(),a.getMonth())}return $.daysInMonth(new Date)}return[31,$.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]};$.dayNumberFromName=function(a){var b=$.locales.get(),c=b.dayNames,d=b.abbreviatedDayNames,e=b.shortDayNames,f=a.toLowerCase();for(var g=0;g<c.length;g++){if(c[g].toLowerCase()===f||d[g].toLowerCase()===f||e[g].toLowerCase()===f){return g}}return-1};$.monthNumberFromName=function(a){var b=$.locales.get(),c=b.monthNames,d=b.abbreviatedMonthNames,e=a.toLowerCase();for(var f=0;f<c.length;f++){if(c[f].toLowerCase()==e||d[f].toLowerCase()==e){return f}}return-1};var f=[],wrap=function(a){return"'+"+a+"+'"},p=function(a,b){if(!b){b=2}return("000"+a).slice(b*-1)},build=function(format){var temp=format.replace(/(\\)?(do|dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\"){return a.replace("\\","")}switch(a){case"yyyy":return wrap("p(d.year(), 4)");case"yy":return wrap("p(d.year())");case"MMMM":return wrap("d.locale().monthNames[d.month()]");case"MMM":return wrap("d.locale().shortMonthNames[d.month()]");case"MM":return wrap("p(d.month())");case"M":return wrap("d.month()");case"dddd":return wrap("d.locale().dayNames[d.date.getDay()]");case"ddd":return wrap("d.locale().shortDayNames[d.date.getDay()]");case"dd":return wrap("p(d.day())");case"d":return wrap("d.day()");case"do":return wrap("d.day() + d.locale().ord(d.day())");case"HH":return wrap("p(d.hours())");case"H":return wrap("d.hours()");case"hh":return wrap("(p(d.hours() < 13 ? (d.hours() === 0 ? 12 : d.hours()) : (d.hours() - 12)))");case"h":return wrap("(d.hours() < 13 ? (d.hours() === 0 ? 12 : d.hours()) : (d.hours() - 12))");case"mm":return wrap("p(d.minutes())");case"m":return wrap("d.minutes()");case"ss":return wrap("p(d.seconds())");case"s":return wrap("d.seconds()");case"t":return wrap("(d.hours() < 12 ? d.locale().amDesignator.substring(0, 1) : d.locale().pmDesignator.substring(0, 1))");case"tt":return wrap("(d.hours() < 12 ? d.locale().amDesignator : d.locale().pmDesignator)");case"S":return wrap("d.locale().ord(d.day())");default:return a}});eval("fn = function (d) { return '"+temp+"';}");return fn};$.formatFn=function(a,b){if(arguments.length===2){for(var c=0;c<f.length;c++){if(f[c]===a){f[c+1]=b;return b}c++}f[f.length]=a;f[f.length]=b;return b}else{for(var c=0;c<f.length;c++){if(f[c]===a){return f[c+1]}c++}return $.formatFn(a,build(a))}}})();(function(){var a=DateTime,b=a.fn,c="year month day hour minute second millisecond".split(" "),d="sunday monday tuesday wednesday thursday friday saturday".split(" "),e="january february march april may june july august september october november december".split(" "),f="FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),g="final first second third fourth fifth".split(" "),h=null,i=null,j=false,k=false,l=false,m,o;for(o=0;o<d.length;o++){m=function(b,c){this[b]=this[b.substring(0,3)]=function(){var b=a.today(),d=c-b.dow();if(b.locale().firstDayOfWeek===1&&b.dow()!==0){d=d+7}return b.add(d).days()};this.fn[b]=this.fn[b.substring(0,3)]=function(){if(k===true){k=false;return this.dow()==c}if(_nth!==null){if(j){this.add(i*-1).seconds()}j=false;var b=_nth;_nth=null;var d=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(n,b);if(this>d){throw new RangeError(a.getDayName(n)+" does not occur "+b+" times in the month of "+a.getMonthName(d.month())+" "+d.year()+".")}return this}return this.moveToDayOfWeek(c,i)}}.apply(a,[d[o],o])}for(o=0;o<e.length;o++){m=function(a,b){this[a]=this[a.substring(0,3)]=function(){return this.today().set({month:b,day:1})}}.apply(a,[e[o],o]);m=function(a,b){this.fn[a]=this.fn[a.substring(0,3)]=function(){if(k){k=false;return this.month(n)}return this.moveToMonth(b,i)}}.apply(a,[e[o],o])}for(o=0;o<c.length;o++){m=function(a,b){this[a+"s"]=this[a]=function(){if(arguments.length===1&&typeof arguments[0]==="number"){this.date["set"+b](arguments[0]);return this}if(typeof i==="number"){var d={};d[a]=i;i=null;return this.add(d)}if(j===true){j=false;return this}if(l===true){l=k=false;var e=this.toConfig(),f=(arguments[0]||new DateTime).toConfig(),g="",h=a;for(var m=0;m<c.length;m++){g=c[m].toLowerCase();if(e[g]!=f[g]){return false}if(h==g){break}}return true}return this.date["get"+b]()};this["get"+b]=function(){return this[a]()};this["set"+b]=function(b){return this[a](b)}}.apply(b,[c[o],f[o]])}b.toDate=function(){return this.date};b.dow=function(){return this.date.getDay()};b.doy=function(){return Math.ceil((this.clone().clearTime()-new DateTime(this.year(),0,1))/864e5)+1};b.toConfig=function(){var a={};for(var b=0;b<c.length;b++){a[c[b].toLowerCase()]=this[c[b]]()}return a};b.next=function(){i=+1;return this};b.last=b.prev=b.previous=function(){i=-1;return this};b.is=function(){k=true;return this};b.same=function(){l=true;j=false;return this};b.today=function(){if(k===true){k=false;return a.equals(this.clone().clearTime(),DateTime.today())}return DateTime.today()};b.at=function(b){return typeof b==="string"?a.parse(this.format("yyyy-MM-dd ")+b):this.set(b)};b.weekday=function(){if(k){k=false;var a=this.dow();return a!==0&&a!==6}return false};b.clone=function(){return new DateTime(this.date.getTime())};b.clearTime=function(){return this.hours(0).minutes(0).seconds(0).milliseconds(0)};b.resetTime=function(){var a=new Date;return this.hours(a.getHours()).minutes(a.getMinutes()).seconds(a.getSeconds()).milliseconds(a.getMilliseconds())};b.compareTo=function(a){return DateTime.compare(this,a)};b.equals=function(a){return DateTime.equals(this,a||new Date)};b.between=function(a,b){return DateTime.inRange(this,a,b)};b.isAfter=function(a){return this.compareTo(a||new DateTime)===1};b.isBefore=function(a){return this.compareTo(a||new DateTime)===-1};b.set=function(a){for(prop in a){if(this[prop]&&typeof a[prop]==="number"){this[prop](a[prop])}}return this};b.add=function(a){if(typeof a=="number"){i=a;return this}for(prop in a){if(this[prop]&&typeof (a[prop]==="number")){this[prop](this[prop]()+a[prop])}}return this};b.week=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;k=!k?this.year():k;l=!l?this.month()+1:l;m=!m?this.day():m;if(l<=2){a=k-1;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);i=b-c;e=0;f=m-1+31*(l-1)}else{a=k;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);i=b-c;e=i+1;f=m+(153*(l-3)+2)/5+58+i}g=(a+b)%7;d=(f+g-e)%7;h=f+3-d|0;if(h<0){j=53-((g-i)/5|0)}else if(h>364+i){j=1}else{j=(h/7|0)+1}k=l=m=null;return j};b.moveToNthOccurrence=function(a,b){var c=0;if(b>0){c=b-1}else if(b===-1){this.moveToLastDayOfMonth();if(this.dow()!==a){this.moveToDayOfWeek(a,-1)}return this}return this.moveToFirstDayOfMonth().add(-1).days().moveToDayOfWeek(a,+1).add(c).weeks()};b.moveToFirstDayOfMonth=function(){return this.set({day:1})};b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.year(),this.month())})};b.moveToDayOfWeek=function(a,b){var c=(a-this.dow()+7*(b||+1))%7;return this.add(c===0?c+=7*(b||+1):c).days()};b.moveToMonth=function(a,b){var c=(a-this.month()+12*(b||+1))%12;return this.add(c===0?c+=12*(b||+1):c).months()};b.hasDaylightSavingTime=function(){return DateTime.today().set({month:0,day:1}).getTimezoneOffset()!==DateTime.today().set({month:6,day:1}).getTimezoneOffset()};b.isDaylightSavingTime=function(){return DateTime.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()};b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())};b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=Number(a)*-6/10;return this.addMinutes(c-b)};b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))};b.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;if(a<0){b=(a-1e4).toString();return b.charAt(0)+b.substr(2)}else{b=(a+1e4).toString();return"+"+b.substr(1)}};b.getElapsed=function(a){return(a||new DateTime)-this};b.toISOString=function(){function a(a){return a<10?"0"+a:a}var b=this.date;return'"'+b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1)+"-"+a(b.getUTCDate())+"T"+a(b.getUTCHours())+":"+a(b.getUTCMinutes())+":"+a(b.getUTCSeconds())+'Z"'};b.format=function(a,b){if(!a){return this.date.toString()}return DateTime.formatFn(a)(this)};b.toString=b.format;b.locale=function(a){if(arguments.length<1){if(h===null){h=DateTime.locales.get()}return h}return h=DateTime.locales.add(a)}})();(function(){DateTime.Parser={Exception:function(a){this.message='Parse error at "'+a.substring(0,10)+' ..."'}};var a=DateTime.Parser,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d){return[d[0],c.substring(d[0].length)]}else{throw new a.Exception(c)}}},token:function(a){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){c.push(d[0]);b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]);b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;c=a.call(this,b);return[null,c[1]]}:null},product:function(){var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[];for(var e=0;e<a.length;e++){d.push(b.each(a[e],c))}return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception){throw d}else{return d}}},any:function(){var b=arguments;return function(c){var d=null;for(var e=0;e<b.length;e++){if(b[e]==null){continue}try{d=b[e].call(this,c)}catch(f){d=null}if(d){return d}}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){var d=[],e=null;for(var f=0;f<b.length;f++){if(b[f]==null){continue}try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]);c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){d=d||b.rtoken(/^\s*/);e=e||null;if(c.length==1){return c[0]}return function(b){var f=null,g=null;var h=[];for(var i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f){throw new a.Exception(b)}if(g){throw new a.Exception(g[1])}if(e){try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){c=c||b.rtoken(/^\s*/);d=d||null;return a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){d=d||b.rtoken(/^\s*/);e=e||null;return function(f){var g=null,h=null,i=null,j=null,k=[[],f],l=false;for(var m=0;m<c.length;m++){i=null;h=null;g=null;l=c.length==1;try{g=c[m].call(this,f)}catch(n){continue}j=[[g[0]],g[1]];if(g[1].length>0&&!l){try{i=d.call(this,g[1])}catch(o){l=true}}else{l=true}if(!l&&i[1].length===0){l=true}if(!l){var p=[];for(var q=0;q<c.length;q++){if(m!=q){p.push(c[q])}}h=b.set(p,d).call(this,i[1]);if(h[0].length>0){j[0]=j[0].concat(h[0]);j[1]=h[1]}}if(j[1].length<k[1].length){k=j}if(k[1].length===0){break}}if(k[0].length===0){return k}if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b){throw new a.Exception(d)}return e}}};var c=function(a){return function(){var b=null,c=[];if(arguments.length>1){b=Array.prototype.slice.call(arguments)}else if(arguments[0]instanceof Array){b=arguments[0]}if(b){for(var d=0,e=b.shift();d<e.length;d++){b.unshift(e[d]);c.push(a.apply(null,b));b.shift();return c}}else{return a.apply(null,arguments)}}};var d="optional not ignore cache".split(/\s/);for(var e=0;e<d.length;e++){b[d[e]]=c(b[d[e]])}var f=function(a){return function(){if(arguments[0]instanceof Array){return a.apply(null,arguments[0])}else{return a.apply(null,arguments)}}};var g="each any all".split(/\s/);for(var h=0;h<g.length;h++){b[g[h]]=f(b[g[h]])}})();(function(){var a=DateTime,b=a.fn,c=a.locales.get(),d=function(a){var b=[];for(var c=0;c<a.length;c++){if(a[c]instanceof Array){b=b.concat(d(a[c]))}else{if(a[c]){b.push(a[c])}}}return b};a.Grammar={};a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");if(b.length){this.timezoneOffset=Number(b)}else{this.timezone=a.toLowerCase()}}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<c.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++){if(b[c]){b[c].call(this)}}var d=new Date;if((this.hour||this.minute)&&!this.month&&!this.year&&!this.day){this.day=d.getDate()}if(!this.year){this.year=d.getFullYear()}if(!this.month&&this.month!==0){this.month=d.getMonth()}if(!this.day){this.day=1}if(!this.hour){this.hour=0}if(!this.minute){this.minute=0}if(!this.second){this.second=0}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else if(this.meridian=="a"&&this.hour==12){this.hour=0}}if(this.day>a.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var e=new DateTime(new Date(this.year,this.month,this.day,this.hour,this.minute,this.second));if(this.timezone){e.set({timezone:this.timezone})}else if(this.timezoneOffset){e.set({timezoneOffset:this.timezoneOffset})}return e},finish:function(b){b=b instanceof Array?d(b):[b];if(b.length===0){return null}for(var c=0;c<b.length;c++){if(typeof b[c]=="function"){b[c].call(this)}}var e=a.today();if(this.now&&!this.unit&&!this.operator){return new DateTime}else if(this.now){e=new DateTime}var f=!!(typeof this.days==="number"||this.days&&this.days!==null||this.orient||this.operator),g,h,i=this.orient==="past"||this.operator==="subtract"?-1:1;if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){e.resetTime()}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;f=true}}if(!f&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate();if(!this.month){this.month=j.getMonth()}this.year=j.getFullYear()}if(f&&this.weekday&&this.unit!="month"){this.unit="day";g=a.getDayNumberFromName(this.weekday)-e.getDay();h=7;this.days=g?(g+i*h)%h:i*h}if(this.month&&this.unit=="day"&&this.operator){this.value=this.month+1;this.month=null}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1}if(this.month&&!this.day&&this.value){e.set({day:this.value*1});if(!f){this.day=this.value*1}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;f=true}if(f&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";g=this.month-e.getMonth();h=12;this.months=g?(g+i*h)%h:i*h;this.month=null}if(!this.unit){this.unit="day"}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*i}else if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}this[this.unit+"s"]=this.value*i}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12}else if(this.meridian=="a"&&this.hour==12){this.hour=0}}if(this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate();if(j.getMonth()!==e.getMonth()){this.month=j.getMonth()}}if((this.month||this.month===0)&&!this.day){this.day=1}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return DateTime.today().setWeek(this.value)}if(f&&this.timezone&&this.day&&this.days){this.day=this.days}return e[f?"add":"set"](this)}};var e=a.Parser.Operators,f=a.Grammar,g=a.Translator,h;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/);f.timePartDelimiter=e.stoken(":");f.whiteSpace=e.rtoken(/^\s*/);f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var i={};f.ctoken=function(a){var b=i[a];if(!b){var d=c.regexPatterns;var f=a.split(/\s+/),g=[];for(var h=0;h<f.length;h++){g.push(e.replace(e.rtoken(d[f[h]]),f[h]))}b=i[a]=e.any.apply(null,g)}return b};f.ctoken2=function(a){return e.rtoken(c.regexPatterns[a])};f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour));f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour));f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour));f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour));f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute));f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute));f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second));f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second));f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter));f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian));f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian));f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone));f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone));f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone));f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz]));f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix);f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day));f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day));f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month));f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month));f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month));f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year));f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year));f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year));f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year));h=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))};f.day=h(f.d,f.dd);f.month=h(f.M,f.MMM);f.year=h(f.yyyy,f.yy);f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}});f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}});f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday);f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]);h=function(){return e.set(arguments,f.datePartDelimiter)};f.mdy=h(f.ddd,f.month,f.day,f.year);f.ymd=h(f.ddd,f.year,f.month,f.day);f.dmy=h(f.ddd,f.day,f.month,f.year);f.date=function(a){return(f[c.dateElementOrder]||f.mdy).call(this,a)};f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b]){return f[b]}else{throw a.Parser.Exception(b)}}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var j={};var k=function(a){return j[a]=j[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++){b.push(k(a[c]))}return e.any.apply(null,b)}else{return k(a)}};f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish);f.start=function(a){try{var b=f._formats.call({},a);if(b[1].length===0){return b}}catch(c){}return f._start.call({},a)};a._parse=a.parse;a.parse=function(b){var c=null;if(!b){return null}if(b instanceof DateTime){return b}if(b instanceof Date){return new DateTime(b)}try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){console.log(c,d);return null}return c[1].length===0?c[0]:null};a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return b[1].length===0?b[0]:null}};a.parseExact=function(b,c){return a.getParseFunction(c)(b)}})();