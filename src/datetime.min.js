/*
 *  Copyright (c) 2012, Geoffrey McGill, Inc. (http://www.datetimejs.com/). All rights reserved.
 *  
 *  Permission is hereby granted, free of charge, to any person obtaining a copy
 *  of this software and associated documentation files (the "Software"), to deal
 *  in the Software without restriction, including without limitation the rights
 *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *  copies of the Software, and to permit persons to whom the Software is
 *  furnished to do so, subject to the following conditions:
 *  
 *  The above copyright notice and this permission notice shall be included in
 *  all copies or substantial portions of the Software.
 *  
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 *  THE SOFTWARE.
 *  
 *  See also:
 *      http://www.datetimejs.com/
 *      https://github.com/geoffreymcgill/DateTimeJS
 */

 var DateTime;(function(){DateTime=function(a){this.date=new Date;var b=null;if(a){var c=typeof a;if(c==="string"){b=Date.parse(a)}else if(c==="number"){b=new Date(a)}else if(a instanceof Date){b=a}else if(a instanceof DateTime){b=a.date}}if(b!==null){this.date=b}delete b};var $=DateTime;$.version="2.0.0";$.fn=DateTime.prototype;$.create=function(a){return new $(a)};$.today=function(){return(new $).clearTime()};$.now=function(){return new $};$.compare=function(a,b){if(a instanceof $){a=a.date}if(b instanceof $){b=b.date}return a<b?-1:a>b?1:0};$.equals=function(a,b){return $.compare(a,b)===0};$.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0};$.daysInMonth=function(a,b){if(arguments.length<2){if(arguments.length===1){if(typeof a==="number"){a=(new $).year(a)}return $.daysInMonth(a.getFullYear(),a.getMonth())}return $.daysInMonth(new Date)}return[31,$.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]};var f=[],w=function(a){return"'+"+a+"+'"},p=function(a,b){if(!b){b=2}return("000"+a).slice(b*-1)},ord=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},build=function(format){var temp=format.replace(/(\\)?(do|dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\"){return a.replace("\\","")}switch(a){case"yyyy":return w("p(d.year(), 4)");case"yy":return w("p(d.year())");case"MMMM":return"September";case"MMM":return"Sep";case"MM":return w("p(d.month())");case"M":return w("d.month()");case"dddd":return w("d.day()");case"ddd":return"Mon";case"dd":return w("p(d.day())");case"d":return w("d.day()");case"do":return w("d.day() + ord(d.day())");case"HH":return w("p(d.hours())");case"H":return w("d.hours()");case"hh":return w("(p(d.hours() < 13 ? (d.hours() === 0 ? 12 : d.hours()) : (d.hours() - 12)))");case"h":return w("(d.hours() < 13 ? (d.hours() === 0 ? 12 : d.hours()) : (d.hours() - 12))");case"mm":return w("p(d.minutes())");case"m":return w("d.minutes()");case"ss":return w("p(d.seconds())");case"s":return w("d.seconds()");case"t":return"am";case"tt":return"AM";case"S":return w("ord(d.day())");default:return a}});eval("fn = function (d) { return '"+temp+"';}");return fn};$.formatFn=function(a,b){if(arguments.length===2){for(var c=0;c<f.length;c++){if(f[c]===a){f[c+1]=b;return b}c++}f[f.length]=a;f[f.length]=b;return b}else{for(var c=0;c<f.length;c++){if(f[c]===a){return f[c+1]}c++}var b=build(a);return $.formatFn(a,b)}}})();(function(){var a=DateTime.fn,b="year month day hours minutes seconds milliseconds".split(" "),c="FullYear Month Date Hours Minutes Seconds Milliseconds".split(" ");for(var d=0;d<b.length;d++){temp=function(b,c){this[b]=function(){if(arguments.length===1&&typeof arguments[0]==="number"){this.date["set"+c](arguments[0]);return this}return this.date["get"+c]()};this["get"+c]=function(){return a.fn[b]()}}.apply(a,[b[d],c[d]])}a.toDate=function(){return this.date};a.clone=function(){return new DateTime(this.date.getTime())};a.clearTime=function(){return this.hours(0).minutes(0).seconds(0).milliseconds(0)};a.resetTime=function(){var a=new Date;return this.hours(a.getHours()).minutes(a.getMinutes()).seconds(a.getSeconds()).milliseconds(a.getMilliseconds())};a.compareTo=function(a){return DateTime.compare(this,a)};a.equals=function(a){return DateTime.equals(this,a||new Date)};a.between=function(a,b){return DateTime.inRange(this,a,b)};a.set=function(a){for(prop in a){if(this[prop]&&typeof a[prop]==="number"){this[prop](a[prop])}}return this};a.format=function(a,b){if(!a){return this.date.toString()}return DateTime.formatFn(a)(this)};a.toString=a.format;a.locale=function(){if(arguments.length===1){this.locale=arguments[0];return a}return this.locale}})();(function(){var a=DateTime,b=function(a){return Object.prototype.toString.call(a)==="[object Array]"};a.min=function(c){return b(c)?c.sort(a.compare)[0]:null};a.max=function(c){return b(c)?c.sort(a.compare)[c.length-1]:null};a.inRange=function(b,c,d){return a.compare(b,c)>-1&&a.compare(b,d)<1};a.overlapping=function(c,d,e,f){if(arguments.length===2&&b(c)&&b(d)){return a.overlapping(a.min(c),a.max(c),a.min(d),a.max(d))}return a.inRange(e,c,d)||a.inRange(d,e,f)}})()